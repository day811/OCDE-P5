# README - Medical Data Migration to MongoDB with Docker

## 1. Project Context

This project is dedicated to migrating a medical dataset from CSV files to a **MongoDB** database to ensure scalable and efficient data management. The migration process is containerized via **Docker**, leveraging a dedicated Python script and orchestrated with Docker Compose, ensuring a portable and reproducible deployment environment.

## 2. Objectives

- Automate migration of CSV data into MongoDB using `migration_script.py`
- Containerize MongoDB and the migration importer with Docker
- Use Docker Compose to manage multi-container setup and volumes
- Provide clear documentation for usage, configuration, and deployment

## 3. Technical Prerequisites

- Docker and Docker Compose installed on a compatible OS (Linux, Windows, Mac)
- Python 3.12 (used in the Python container)
- MongoDB Docker image version 7
- Git for version control
- `.env` file configured with environment variables (e.g. `MONGO_PORT`)

## 4. Project Structure

- `migration_script.py`: Python script performing the CSV to MongoDB migration
- `requirements.txt`: Python dependency list for the migration script
- `Dockerfile`: Defines the Python environment for the migration script container
- `docker-compose.yml`: Orchestrates the MongoDB service and the importer container
- `data/`: Read-only volume containing input CSV and validation schema files for migration
- `logs/`: Volume for storing logs generated by the migration script
- `.env`: Environment variable file for configuration

## 5. Migration Workflow

The migration happens in two coordinated containers via Docker Compose:

- **mongo**: Runs MongoDB instance, with persistent volume `mongo_data` for database storage, exposed on port `${MONGO_PORT}`
- **importer**: Builds a Python container from the Dockerfile, running `migration_script.py` to read CSV files from `/app/data` (mounted from host `./data`), process and migrate them into MongoDB. Logs are stored in `/app/logs`.

The `importer` service depends on the `mongo` container, ensuring MongoDB is ready before migration starts. The environment variable `DOCKMODE=True` is set inside the importer container to indicate containerized execution.

## 6. Usage Instructions

### Prepare environment variables

Change the `.env` file in the project root if needed:

```bash
MONGO_PORT=27017
```

Adjust port mapping as needed.

### Build and launch containers

```bash
docker-compose up --build
```

This command builds the importer image and launches both MongoDB and the migration script container.

### Monitor migration

- Logs from the migration process are stored in the host directory `./logs`.
- MongoDB data persists in the Docker volume `mongo_data`.

### Stopping containers

```bash
docker-compose down
```

This stops and removes containers but preserves volumes.

## 7. Key Technical Details

- The Python container uses Python 3.12 base image
- Migration script reads CSV files mounted as a read-only volume
- MongoDB container uses official Mongo image version 7 with persistent storage
- Docker Compose handles service dependencies and volumes management
- Environment configuration is externalized through `.env` for flexibility

## 8. Important Considerations

- Verify CSV data integrity before migration
- Ensure proper network communication between containers (handled by Docker Compose by default)
- Review the `migration_script.py` to customize schema mapping or logging as needed
- Keep `.env` secure and excluded from version control
- Use GitHub for continuous version tracking and collaboration

## 9. Additional Resources

- [MongoDB Docker Image Documentation](https://hub.docker.com/_/mongo)
- [Python Docker Official Image](https://hub.docker.com/_/python)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [MongoDB Documentation](https://docs.mongodb.com/)

***